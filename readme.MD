# ğŸ“¦ Remedios

Remedios es un sistema modular para integrar y procesar mensajes de WhatsApp.

## ğŸš€ CaracterÃ­sticas

- Recibe mensajes de WhatsApp a travÃ©s de un webhook.
- Encola los mensajes en Kafka para su procesamiento asÃ­ncrono.
- ImplementaciÃ³n modular para facilitar la extensiÃ³n.

## ğŸ›  InstalaciÃ³n

### Requisitos previos

- Python 3.10
- Docker
- Kafka y Zookeeper en ejecuciÃ³n

### InstalaciÃ³n

1. Clona el repositorio:
   ```sh
   git clone https://github.com/BorisFaj/remedios-public.git
   cd remedios-public
   ```

2. Instala las dependencias:
   ```sh
   pip install -r requirements.txt
   ```

3. Configura las variables de entorno.

4. Ejecuta el servicio:
   ```sh
   python kafka/server.py
   ```

## ğŸ“œ Uso

1. Configura un webhook en tu cuenta de WhatsApp Business API.
2. Envia mensajes y observa cÃ³mo son encolados en Kafka.


## ğŸ”§ ConfiguraciÃ³n

Remedios requiere dos tipos de configuraciÃ³n:  

### 1ï¸âƒ£ `.env` para `server.py`
Este archivo define las credenciales de acceso a Redpanda/Kafka:

```ini
REDPANDA_PASS={mi_pass}
REDPANDA_USER={mi_user}
BOOTSTRAP_SERVER={mi_server}
```

### 2ï¸âƒ£ Variables de entorno para Docker
Para levantar correctamente el Docker, remedios necesita que le pases estas variables de entorno:

```ini
GRAPH_URL={url}
GRAPH_API_TOKEN={token}
HF_TOKEN={token}
REDPANDA_PASS={pass}
REDPANDA_USER={user}
KAFKA_TOPIC={topic}
BOOTSTRAP_SERVER={server}
```

ğŸ“Œ **Comportamiento del `super_consumer` segÃºn `KAFKA_TOPIC`**:

- **`whatsapp-text`** â†’ Levanta un consumidor de texto con el modelo **Mistral NeMo Instruct**.
- **`whatsapp-audio`** â†’ Levanta un consumidor de audio con el modelo **Whisper 3 Turbo**.


## ğŸ›  Contribuir

Â¡Contribuciones bienvenidas! Si quieres mejorar el proyecto, sigue estos pasos:

1. Haz un **fork** del repo.
2. Crea una rama con tu mejora: `git checkout -b mi-mejora`.
3. Haz commit de los cambios: `git commit -m "AÃ±adida nueva funcionalidad"`.
4. Sube tu rama: `git push origin mi-mejora`.
5. Abre un **pull request**.

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la licencia Apache 2.0. Consulta el archivo `LICENSE` para mÃ¡s detalles.
